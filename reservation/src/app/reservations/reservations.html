<div id="theForm">
  <h2>Reservation Form</h2>
  <form #f="ngForm" name="reservationForm" (submit)="addReservation(f)">

    <div class="form-group">
      <label>First Name</label>
      <input type="text"
        class="form-control"
        name="firstName"
        [(ngModel)]="reservation.firstName"
        #reservationModel="ngModel"
        required>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The first name is required
      </span>
    </div>

    <div class="form-group">
      <label>Last Name</label>
      <input type="text"
        class="form-control"
        name="lastName"
        [(ngModel)]="reservation.lastName"
        #contactModel="ngModel"
        required>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The last name is required
      </span>
    </div>

    <div class="form-group">
      <label>Email Address</label>
      <input type="text"
        class="form-control"
        name="emailAddress"
        [(ngModel)]="reservation.emailAddress"
        #contactModel="ngModel"
        required>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The email address is required
      </span>
    </div>

    <div class="form-group">
      <label>Phone Number</label>
      <input type="text"
        class="form-control"
        name="phone"
        [(ngModel)]="reservation.phone"
        #contactModel="ngModel"
        required>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The phone number is required
      </span>
    </div>

    <div class="form-group">
      <label>Member/NonMember</label>
      &nbsp;
      <label class="radio-inline">
        <input type="radio"          
          name="optradio"
          value="member"
          [(ngModel)]="reservation.status"
          >
        &nbsp;Member
      </label>
      &nbsp;
      <label class="radio-inline">
        <input type="radio"          
          name="optradio"
          value="nonmember"
          [(ngModel)]="reservation.status"
          >
        &nbsp;NonMember
      </label>  
    </div>

    <div class="form-group">
      <label>Area</label>
      <select class="form-control"
          name="area"
          [(ngModel)]="reservation.area"
          #areaModel="ngModel"
          required>
    <option value="" disabled selected>Select Area</option>
    <option *ngFor="let area of areas" [value]="area">{{ area }}</option>
  </select>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The Area selection is required
      </span>
    </div>
    <div class="form-group">
      <label>time</label>
      <select class="form-control"
      name="time"
      [(ngModel)]="reservation.time"
      #timeModel="ngModel"
      required>
<option value="" disabled selected>Select Time</option>
<option *ngFor="let slot of timeSlots" [value]="slot">{{ slot }}</option>
</select>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The time slot selection is required
      </span>
    </div>

    <div class="form-group">
      <label>Date</label>
      <input type="Date"
        class="form-control"
        name="date"
        [(ngModel)]="reservation.date"
        #contactModel="ngModel"
        required>
      <span class="help-block danger" *ngIf="reservationModel.errors?.['required'] && reservationModel.touched">
        The Date selection is required
      </span>
    </div>

    <div class="form-group">
      <label>Upload Image</label>
      <input type="file"
        class="form-control"
        name="imageName"
        [(ngModel)]="reservation.imageName"
        #imageName="ngModel"
        (change)="onFileSelected($event)" />      
    </div>

    <button
      class="btn btn-primary btn-sm"
      [disabled]="f.invalid">
      Add Reservation
    </button>
  </form>
  <div>

    <div id="theList" class="reservation-list-container">
      <div class="toolbar">
      <h2>{{ userName }}'s Reservation List</h2> 
      <button (click)="authService.logout()" class="btn btn-sm btn-danger">Logout</button>
  </div>    
  
    <div *ngFor="let item of reservations; let i = index;" class="row">
      <div class="col-2">{{ item.firstName }}</div>
      <div class="col-2">{{ item.lastName }}</div>
      <div class="col-2">{{ item.emailaddress }}</div>
      <div class="col-2">{{ item.phone }}</div>
      <div class="col-2">
        <img src="http://localhost/AngularApp2/reservationapi/uploads/{{item.imageName}}" width="75" height="75" alt="{{item.imageName}}" />
      </div>

      <div class="col-2">
        <button class="btn btn-success btn-sm" [routerLink]="['/edit', item.reservationID]">Edit</button>
        <button class="btn btn-danger btn-sm" (click)="deleteReservation(item.reservationID ? item.reservationID : 0)">Delete</button>
      </div>
    </div>
   </div>   

      <!-- <div class="col-2">
        <input type="text"
          [(ngModel)]="reservations[i].reservationID"
          class="form-control"
          required
          #reservationID="ngModel"
          [ngClass]="{ 'is-invalid': reservationID.touched && reservationID.invalid }">
      </div> -->

      <div class="col-2">
        <input type="text"
          [(ngModel)]="item.firstName"
          class="form-control"
          required
          #firstName="ngModel"
          [ngClass]="{ 'is-invalid': firstName.touched && firstName.invalid }">
      </div>

      <div class="col-2">
        <input type="text"
          [(ngModel)]="item.lastName"
          class="form-control"
          required
          #lastName="ngModel"
          [ngClass]="{ 'is-invalid': lastName.touched && lastName.invalid }">
      </div>

      <div class="col-2">
        <input type="text"
          [(ngModel)]="item.emailAddress"
          class="form-control"
          required
          #emailAddress="ngModel"
          [ngClass]="{ 'is-invalid': emailAddress.touched && emailAddress.invalid }">
      </div>

      <div class="col-2">
        <input type="text"
          [(ngModel)]="item.phone"
          class="form-control"
          required
          #phone="ngModel"
          [ngClass]="{ 'is-invalid': phone.touched && phone.invalid }">
      </div>      

      <div class="col-2">        
          <img src="http://localhost/AngularApp2/reservationapi/uploads/{{item.imageName}}" width="75" height="75" alt="{{item.imageName}}" />
      </div>

      <div class="col-2">
        <input type="button"
          value="Edit"
          class="btn btn-success btn-sm"
          [disabled]="firstName.invalid || lastName.invalid || emailAddress.invalid || phone.invalid"
          (click)="editReservation(firstName, lastName, emailAddress, phone, item.reservationID)">

      </div>

    </div>
  </div>

  <div id="links" class="mt-4 text-center">
    <button class="btn btn-sm btn-primary" routerLink="/add">
      Add Reservation
    </button>
    <button class="btn btn-sm btn-dark text-white" routerLink="/about">
        About Us
    </button>


</div>